

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API Reference &mdash; Drystal v1.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Drystal v1.0 documentation" href="index.html"/>
        <link rel="next" title="Resources" href="resources.html"/>
        <link rel="prev" title="Welcome to Drystal’s website!" href="index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> Drystal</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#engine">Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="#event">Event</a></li>
<li class="toctree-l2"><a class="reference internal" href="#graphics">Graphics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#font-rendering">Font rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="#particle-system">Particle System</a></li>
<li class="toctree-l2"><a class="reference internal" href="#physics">Physics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#audio">Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="#storage">Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#web">Web</a></li>
<li class="toctree-l2"><a class="reference internal" href="#utils">Utils</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">Resources</a><ul>
<li class="toctree-l2"><a class="reference internal" href="resources.html#useful-links">Useful links</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Drystal</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>API Reference</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/api.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <span class="target" id="module-drystal"></span><div class="section" id="api-reference">
<h1>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#engine" id="id3">Engine</a><ul>
<li><a class="reference internal" href="#callbacks" id="id4">Callbacks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#event" id="id5">Event</a><ul>
<li><a class="reference internal" href="#id1" id="id6">Callbacks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphics" id="id7">Graphics</a><ul>
<li><a class="reference internal" href="#window" id="id8">Window</a></li>
<li><a class="reference internal" href="#surface" id="id9">Surface</a></li>
<li><a class="reference internal" href="#drawing-primitives" id="id10">Drawing primitives</a></li>
<li><a class="reference internal" href="#blending" id="id11">Blending</a></li>
<li><a class="reference internal" href="#camera" id="id12">Camera</a></li>
<li><a class="reference internal" href="#buffer" id="id13">Buffer</a></li>
<li><a class="reference internal" href="#shader" id="id14">Shader</a><ul>
<li><a class="reference internal" href="#post-processing" id="id15">Post processing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#colors" id="id16">Colors</a></li>
<li><a class="reference internal" href="#sprite" id="id17">Sprite</a></li>
</ul>
</li>
<li><a class="reference internal" href="#font-rendering" id="id18">Font rendering</a></li>
<li><a class="reference internal" href="#particle-system" id="id19">Particle System</a></li>
<li><a class="reference internal" href="#physics" id="id20">Physics</a></li>
<li><a class="reference internal" href="#audio" id="id21">Audio</a></li>
<li><a class="reference internal" href="#storage" id="id22">Storage</a></li>
<li><a class="reference internal" href="#web" id="id23">Web</a></li>
<li><a class="reference internal" href="#utils" id="id24">Utils</a></li>
</ul>
</div>
<div class="section" id="engine">
<h2><a class="toc-backref" href="#id3">Engine</a><a class="headerlink" href="#engine" title="Permalink to this headline">¶</a></h2>
<span class="target" id="drystal-stop"></span><dl class="function">
<dt id="drystal.stop">
<tt class="descclassname">drystal.</tt><tt class="descname">stop</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops the execution of drystal.</p>
</dd></dl>

<span class="target" id="drystal-reload"></span><dl class="function">
<dt id="drystal.reload">
<tt class="descclassname">drystal.</tt><tt class="descname">reload</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.reload" title="Permalink to this definition">¶</a></dt>
<dd><p>Reloads the current game. This can be useful during the development on your desktop.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">F3 also reloads the game.</p>
</div>
</dd></dl>

<div class="section" id="callbacks">
<h3><a class="toc-backref" href="#id4">Callbacks</a><a class="headerlink" href="#callbacks" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="drystal.init">
<tt class="descclassname">drystal.</tt><tt class="descname">init</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.init" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is called after script loading, before the first frame.
You may want to load your assets from here but you can load them before if you prefer.</p>
<div class="code highlight-lua"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="nb">print</span> <span class="s1">&#39;</span><span class="s">1&#39;</span>
<span class="k">function</span> <span class="nc">drystal</span><span class="p">.</span><span class="nf">init</span><span class="p">()</span>
   <span class="nb">print</span> <span class="s1">&#39;</span><span class="s">3&#39;</span>
<span class="k">end</span>
<span class="nb">print</span> <span class="s1">&#39;</span><span class="s">2&#39;</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

<dl class="function">
<dt id="drystal.update">
<tt class="descclassname">drystal.</tt><tt class="descname">update</tt><big>(</big><em>dt: float</em><big>)</big><a class="headerlink" href="#drystal.update" title="Permalink to this definition">¶</a></dt>
<dd><p>This functions is called at each frame. The <tt class="docutils literal"><span class="pre">dt</span></tt> parameter represents the time elapsed since the last update (in seconds).
Use this function to update the game state.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.draw">
<tt class="descclassname">drystal.</tt><tt class="descname">draw</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.draw" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is called after the <tt class="docutils literal"><span class="pre">update</span></tt> function.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.atexit">
<tt class="descclassname">drystal.</tt><tt class="descname">atexit</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.atexit" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is called when the window is closed or when <a class="reference internal" href="#drystal-stop"><em>drystal.stop</em></a> is called.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.prereload">
<tt class="descclassname">drystal.</tt><tt class="descname">prereload</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.prereload" title="Permalink to this definition">¶</a></dt>
<dd><p>Called before the game is reloaded (by <a class="reference internal" href="#drystal-reload"><em>reload</em></a>, by pressing F3 or with livereloading).
You can use it to save the current state of the game inside a global variable, so it will still be accessible after the reload.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.postreload">
<tt class="descclassname">drystal.</tt><tt class="descname">postreload</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.postreload" title="Permalink to this definition">¶</a></dt>
<dd><p>Called after the game was reloaded.
You can use it to restore the state of the game.</p>
</dd></dl>

</div>
</div>
<div class="section" id="event">
<h2><a class="toc-backref" href="#id5">Event</a><a class="headerlink" href="#event" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="drystal.set_relative_mode">
<tt class="descclassname">drystal.</tt><tt class="descname">set_relative_mode</tt><big>(</big><em>relative: boolean</em><big>)</big><a class="headerlink" href="#drystal.set_relative_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Relative mode is when the mouse is hidden and can&#8217;t leave the window/canvas.</p>
</dd></dl>

<div class="section" id="id1">
<h3><a class="toc-backref" href="#id6">Callbacks</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>To receive events, you have to defined some of the following functions.</p>
<dl class="function">
<dt id="drystal.mouse_motion">
<tt class="descclassname">drystal.</tt><tt class="descname">mouse_motion</tt><big>(</big><em>x</em>, <em>y</em>, <em>dx</em>, <em>dy</em><big>)</big><a class="headerlink" href="#drystal.mouse_motion" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the mouse is moved. <tt class="docutils literal"><span class="pre">dx</span></tt> and <tt class="docutils literal"><span class="pre">dy</span></tt> are difference betweend the current position and the last one.</p>
</dd></dl>

<span class="target" id="mouse-press"></span><dl class="function">
<dt id="drystal.mouse_press">
<tt class="descclassname">drystal.</tt><tt class="descname">mouse_press</tt><big>(</big><em>x</em>, <em>y</em>, <em>button: int</em><big>)</big><a class="headerlink" href="#drystal.mouse_press" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a button (or mouse wheel) is pressed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Param:</th><td class="field-body">button is one of <tt class="docutils literal"><span class="pre">drystal.BUTTON_LEFT</span></tt>, <tt class="docutils literal"><span class="pre">drystal.BUTTON_RIGHT</span></tt>, <tt class="docutils literal"><span class="pre">drystal.BUTTON_MIDDLE</span></tt>,
<tt class="docutils literal"><span class="pre">drystal.WHEEL_UP</span></tt> or <tt class="docutils literal"><span class="pre">drystal.WHEEL_DOWN</span></tt>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="drystal.mouse_release">
<tt class="descclassname">drystal.</tt><tt class="descname">mouse_release</tt><big>(</big><em>x</em>, <em>y</em>, <em>button</em><big>)</big><a class="headerlink" href="#drystal.mouse_release" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a button (or mouse wheel) is released.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Param:</th><td class="field-body">button is the same as in <a class="reference internal" href="#mouse-press"><em>mouse_press</em></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="key-press"></span><dl class="function">
<dt id="drystal.key_press">
<tt class="descclassname">drystal.</tt><tt class="descname">key_press</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#drystal.key_press" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a key is pressed.
Depending on key repeat system configuration of the player, <tt class="docutils literal"><span class="pre">key_press</span></tt> can be called multiple times even if the user did not released the key. <tt class="docutils literal"><span class="pre">key_release</span></tt> will be called too.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.key_release">
<tt class="descclassname">drystal.</tt><tt class="descname">key_release</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#drystal.key_release" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#key-press"><em>key_press</em></a> but when a key is released.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.key_text">
<tt class="descclassname">drystal.</tt><tt class="descname">key_text</tt><big>(</big><em>unicode_key</em><big>)</big><a class="headerlink" href="#drystal.key_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a key is pressed, <tt class="docutils literal"><span class="pre">unicode_key</span></tt> is the character generated by the key and the current modifiers.
For example, if <em>shift</em> and <em>d</em> are pressed, <tt class="docutils literal"><span class="pre">key_text</span></tt> will be called with the parameter <strong>&#8216;D&#8217;</strong>.</p>
</dd></dl>

</div>
</div>
<div class="section" id="graphics">
<h2><a class="toc-backref" href="#id7">Graphics</a><a class="headerlink" href="#graphics" title="Permalink to this headline">¶</a></h2>
<div class="section" id="window">
<h3><a class="toc-backref" href="#id8">Window</a><a class="headerlink" href="#window" title="Permalink to this headline">¶</a></h3>
<dl class="data">
<dt id="drystal.screen">
<tt class="descclassname">drystal.</tt><tt class="descname">screen</tt><a class="headerlink" href="#drystal.screen" title="Permalink to this definition">¶</a></dt>
<dd><p><cite>screen</cite> is the surface representing the window/canvas, which will be blit after execution of the <cite>drystal.draw</cite> callback.</p>
</dd></dl>

<dl class="data">
<dt id="drystal.current_draw_on">
<tt class="descclassname">drystal.</tt><tt class="descname">current_draw_on</tt><a class="headerlink" href="#drystal.current_draw_on" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#surface-draw-on"><em>Surface:draw_on()</em></a></p>
</dd></dl>

<dl class="data">
<dt id="drystal.current_draw_from">
<tt class="descclassname">drystal.</tt><tt class="descname">current_draw_from</tt><a class="headerlink" href="#drystal.current_draw_from" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#surface-draw-from"><em>Surface:draw_from()</em></a></p>
</dd></dl>

<dl class="function">
<dt id="drystal.resize">
<tt class="descclassname">drystal.</tt><tt class="descname">resize</tt><big>(</big><em>width: int</em>, <em>height: int</em><big>)</big><a class="headerlink" href="#drystal.resize" title="Permalink to this definition">¶</a></dt>
<dd><p>Resizes the window (or the canvas in the browser) to the specified dimensions.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Unlike some engines, you can resize the window without having to recreate your surfaces or shaders.</p>
</div>
<div class="highlight-lua"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">drystal</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
<span class="nb">assert</span><span class="p">(</span><span class="n">drystal</span><span class="p">.</span><span class="n">screen</span><span class="p">.</span><span class="n">w</span> <span class="o">==</span> <span class="mi">200</span><span class="p">)</span>
<span class="nb">assert</span><span class="p">(</span><span class="n">drystal</span><span class="p">.</span><span class="n">screen</span><span class="p">.</span><span class="n">h</span> <span class="o">==</span> <span class="mi">300</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

<dl class="function">
<dt id="drystal.set_fullscreen">
<tt class="descclassname">drystal.</tt><tt class="descname">set_fullscreen</tt><big>(</big><em>fullscreen: boolean</em><big>)</big><a class="headerlink" href="#drystal.set_fullscreen" title="Permalink to this definition">¶</a></dt>
<dd><p>Enables or disables the fullscreen mode.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It will make the game fits the whole page in a browser and not use
the fullscreen mode. We choose this behavior because the echap key will not
be available anymore and it makes less sense to play a game in fullscreen with a browser.
You also need to ensure that there is no border or margin for the canvas in your index.html.</p>
</div>
<div class="highlight-css"><div class="highlight"><pre><span class="nt">html</span><span class="o">,</span><span class="nt">body</span> <span class="p">{</span>
    <span class="k">margin</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="k">padding</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="k">width</span><span class="o">:</span> <span class="m">100%</span><span class="p">;</span>
    <span class="k">height</span><span class="o">:</span> <span class="m">100%</span><span class="p">;</span>
    <span class="k">overflow</span><span class="o">:</span> <span class="k">hidden</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="drystal.set_title">
<tt class="descclassname">drystal.</tt><tt class="descname">set_title</tt><big>(</big><em>title: str</em><big>)</big><a class="headerlink" href="#drystal.set_title" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes the title of the window. In the browser, the title of the document is changed.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.show_cursor">
<tt class="descclassname">drystal.</tt><tt class="descname">show_cursor</tt><big>(</big><em>show: boolean</em><big>)</big><a class="headerlink" href="#drystal.show_cursor" title="Permalink to this definition">¶</a></dt>
<dd><p>Decides if the mouse cursor should be hidden or not.</p>
</dd></dl>

</div>
<div class="section" id="surface">
<h3><a class="toc-backref" href="#id9">Surface</a><a class="headerlink" href="#surface" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="drystal.Surface">
<em class="property">class </em><tt class="descclassname">drystal.</tt><tt class="descname">Surface</tt><a class="headerlink" href="#drystal.Surface" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div>Object representing a surface. Surfaces can be drawn on other surfaces (screen included).</div></blockquote>
<dl class="data">
<dt id="drystal.Surface:w">
<tt class="descname">w</tt><a class="headerlink" href="#drystal.Surface:w" title="Permalink to this definition">¶</a></dt>
<dd><p>Width of the surface.</p>
</dd></dl>

<dl class="data">
<dt id="drystal.Surface:h">
<tt class="descname">h</tt><a class="headerlink" href="#drystal.Surface:h" title="Permalink to this definition">¶</a></dt>
<dd><p>Height of the surface.</p>
</dd></dl>

<span class="target" id="surface-draw-on"></span><dl class="method">
<dt id="drystal.Surface:draw_on">
<tt class="descname">draw_on</tt><big>(</big><big>)</big> &rarr; Surface<a class="headerlink" href="#drystal.Surface:draw_on" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this surface as destinatin/backbuffer (draw method be redirected to this surface instead of screen) for futur draws.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">the old surface which was used</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="surface-draw-from"></span><dl class="method">
<dt id="drystal.Surface:draw_from">
<tt class="descname">draw_from</tt><big>(</big><big>)</big> &rarr; Surface<a class="headerlink" href="#drystal.Surface:draw_from" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this surface as source for futur textured draws (like <tt class="docutils literal"><span class="pre">drystal.draw_sprite</span></tt>).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">the old surface which was used</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="drystal.Surface:set_filter">
<tt class="descname">set_filter</tt><big>(</big><em>filter</em><big>)</big><a class="headerlink" href="#drystal.Surface:set_filter" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Param:</th><td class="field-body">filter is one of <tt class="docutils literal"><span class="pre">drystal.NEAREST</span></tt>, <tt class="docutils literal"><span class="pre">drystal.LINEAR</span></tt>, <tt class="docutils literal"><span class="pre">drystal.BILINEAR</span></tt> or <tt class="docutils literal"><span class="pre">drystal.TRILINEAR</span></tt>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">A surface is limited to 2048x2048 pixels. We follow the <a class="reference external" href="http://webglstats.com/">WebGL Stats</a> and we use the highest texture size at 100%.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="drystal.new_surface">
<tt class="descclassname">drystal.</tt><tt class="descname">new_surface</tt><big>(</big><em>width</em>, <em>height</em><big>)</big><a class="headerlink" href="#drystal.new_surface" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new surface of dimensions (<tt class="docutils literal"><span class="pre">width</span></tt>, <tt class="docutils literal"><span class="pre">height</span></tt>).
By default, the surface is transparent.</p>
<div class="code highlight-lua"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="kd">local</span> <span class="n">surf</span> <span class="o">=</span> <span class="n">drystal</span><span class="p">.</span><span class="n">new_surface</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
<span class="n">surf</span><span class="p">:</span><span class="n">draw_on</span><span class="p">()</span> <span class="c1">-- the following draw function will act on this surface</span>
<span class="n">drystal</span><span class="p">.</span><span class="n">set_color</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
<span class="n">drystal</span><span class="p">.</span><span class="n">draw_circle</span><span class="p">(</span><span class="n">surf</span><span class="p">.</span><span class="n">w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">surf</span><span class="p">.</span><span class="n">h</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="c1">-- draw a white circle inside the surface</span>
<span class="n">drystal</span><span class="p">.</span><span class="n">screen</span><span class="p">:</span><span class="n">draw_on</span><span class="p">()</span>
<span class="o">...</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

<dl class="function">
<dt id="drystal.load_surface">
<tt class="descclassname">drystal.</tt><tt class="descname">load_surface</tt><big>(</big><em>filename</em><big>)</big><a class="headerlink" href="#drystal.load_surface" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a surface from a file.
If the file does not exist or is invalid, <tt class="docutils literal"><span class="pre">load_surface</span></tt> returns (<cite>nil</cite>, error).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Use <tt class="code lua docutils literal"><span class="name builtin"><span class="pre">assert</span></span><span class="punctuation"><span class="pre">(</span></span><span class="name"><span class="pre">drystal</span></span><span class="punctuation"><span class="pre">.</span></span><span class="name"><span class="pre">load_surface</span></span> <span class="literal string single"><span class="pre">'</span></span><span class="literal string"><span class="pre">test.png'</span></span><span class="punctuation"><span class="pre">)</span></span></tt> to make sure the surface is loaded.</p>
</div>
</dd></dl>

</div>
<div class="section" id="drawing-primitives">
<h3><a class="toc-backref" href="#id10">Drawing primitives</a><a class="headerlink" href="#drawing-primitives" title="Permalink to this headline">¶</a></h3>
<span class="target" id="set-color"></span><dl class="function">
<dt id="drystal.set_color">
<tt class="descclassname">drystal.</tt><tt class="descname">set_color</tt><big>(</big><em>red: float [0-255], green: float [0-255], blue: float [0-255]</em><big>)</big><a class="headerlink" href="#drystal.set_color" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets current color used by <tt class="docutils literal"><span class="pre">draw_*</span></tt> functions.</p>
</dd></dl>

<span class="target" id="set-alpha"></span><dl class="function">
<dt id="drystal.set_alpha">
<tt class="descclassname">drystal.</tt><tt class="descname">set_alpha</tt><big>(</big><em>alpha: float [0-255]</em><big>)</big><a class="headerlink" href="#drystal.set_alpha" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the current alpha used by <tt class="docutils literal"><span class="pre">draw_*</span></tt> functions.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.set_line_width">
<tt class="descclassname">drystal.</tt><tt class="descname">set_line_width</tt><big>(</big><em>width: float</em><big>)</big><a class="headerlink" href="#drystal.set_line_width" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the current line width used by <a class="reference internal" href="#draw-line"><em>draw_line</em></a>.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.draw_background">
<tt class="descclassname">drystal.</tt><tt class="descname">draw_background</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.draw_background" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears the current <cite>draw_on</cite> surface.</p>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In the following function, <tt class="docutils literal"><span class="pre">x</span></tt>, <tt class="docutils literal"><span class="pre">y</span></tt>, <tt class="docutils literal"><span class="pre">w</span></tt> (width) and <tt class="docutils literal"><span class="pre">h</span></tt> (height) are floats. Angle are expressed in radians. <tt class="docutils literal"><span class="pre">x</span></tt> and <tt class="docutils literal"><span class="pre">y</span></tt> are screen coordinates.</p>
</div>
<span class="target" id="draw-point"></span><dl class="function">
<dt id="drystal.draw_point">
<tt class="descclassname">drystal.</tt><tt class="descname">draw_point</tt><big>(</big><em>x</em>, <em>y</em>, <em>size</em><big>)</big><a class="headerlink" href="#drystal.draw_point" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws a point at the given coordinate and with given size.</p>
</dd></dl>

<span class="target" id="draw-line"></span><dl class="function">
<dt id="drystal.draw_line">
<tt class="descclassname">drystal.</tt><tt class="descname">draw_line</tt><big>(</big><em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em><big>)</big><a class="headerlink" href="#drystal.draw_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws a line between the two given points.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.draw_triangle">
<tt class="descclassname">drystal.</tt><tt class="descname">draw_triangle</tt><big>(</big><em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em>, <em>x3</em>, <em>y3</em><big>)</big><a class="headerlink" href="#drystal.draw_triangle" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws a filled triangle between the three given points.</p>
</dd></dl>

<span class="target" id="draw-surface"></span><dl class="function">
<dt id="drystal.draw_surface">
<tt class="descclassname">drystal.</tt><tt class="descname">draw_surface</tt><big>(</big><em>ix1</em>, <em>iy1</em>, <em>ix2</em>, <em>iy2</em>, <em>ix3</em>, <em>iy3</em>, <em>ox1</em>, <em>oy1</em>, <em>ox2</em>, <em>oy2</em>, <em>ox3</em>, <em>oy3</em><big>)</big><a class="headerlink" href="#drystal.draw_surface" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws a surface (set as <cite>current draw from</cite>). The first 6 parameters represent a triangle in the source texture, the last 6 represent the destination triangle. They can have different sizes to create deformations.</p>
<p>Tinting is possible by using <a class="reference internal" href="#set-color"><em>set_color</em></a> (255, 255, 255 for no modification).</p>
</dd></dl>

<dl class="function">
<dt id="drystal.draw_quad">
<tt class="descclassname">drystal.</tt><tt class="descname">draw_quad</tt><big>(</big><em>ix1</em>, <em>iy1</em>, <em>ix2</em>, <em>iy2</em>, <em>ix3</em>, <em>iy3</em>, <em>ix4</em>, <em>iy4</em>, <em>ox1</em>, <em>oy1</em>, <em>ox2</em>, <em>oy2</em>, <em>ox3</em>, <em>oy3</em>, <em>ox4</em>, <em>oy4</em><big>)</big><a class="headerlink" href="#drystal.draw_quad" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#draw-surface"><em>draw_surface</em></a> but with quadrilaterals instead of triangles.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.draw_rect">
<tt class="descclassname">drystal.</tt><tt class="descname">draw_rect</tt><big>(</big><em>x</em>, <em>y</em>, <em>w</em>, <em>h</em><big>)</big><a class="headerlink" href="#drystal.draw_rect" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws a filled rectangle.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.draw_rect_rotated">
<tt class="descclassname">drystal.</tt><tt class="descname">draw_rect_rotated</tt><big>(</big><em>x</em>, <em>y</em>, <em>w</em>, <em>h</em>, <em>angle: float</em><big>)</big><a class="headerlink" href="#drystal.draw_rect_rotated" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws a filled rotated rectangle.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.draw_square">
<tt class="descclassname">drystal.</tt><tt class="descname">draw_square</tt><big>(</big><em>x</em>, <em>y</em>, <em>w</em>, <em>h</em><big>)</big><a class="headerlink" href="#drystal.draw_square" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws a non-filled rectangle.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.draw_circle">
<tt class="descclassname">drystal.</tt><tt class="descname">draw_circle</tt><big>(</big><em>x</em>, <em>y</em>, <em>radius: float</em><big>)</big><a class="headerlink" href="#drystal.draw_circle" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws a circle. The coordinate is the position of the center. <tt class="docutils literal"><span class="pre">radius</span></tt> is expressed in pixel.</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This function draws a lot of triangles. If possible, include a circle in your spritesheet and draw it with <a class="reference internal" href="#draw-sprite"><em>draw_sprite</em></a>.</p>
</div>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="drystal.draw_polygon">
<tt class="descclassname">drystal.</tt><tt class="descname">draw_polygon</tt><big>(</big><em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em>, <em>...</em><big>)</big><a class="headerlink" href="#drystal.draw_polygon" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws a filled polygon.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.draw_polyline">
<tt class="descclassname">drystal.</tt><tt class="descname">draw_polyline</tt><big>(</big><em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em>, <em>...</em><big>)</big><a class="headerlink" href="#drystal.draw_polyline" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws a non-filled polygon.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.draw_image">
<tt class="descclassname">drystal.</tt><tt class="descname">draw_image</tt><big>(</big><em>x</em>, <em>y</em>, <em>w</em>, <em>h</em>, <em>destx</em>, <em>desty</em><span class="optional">[</span>, <em>destw=w</em><span class="optional">[</span>, <em>desth=h</em><span class="optional">]</span><span class="optional">]</span><big>)</big><a class="headerlink" href="#drystal.draw_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws an image. It can be resized if <tt class="docutils literal"><span class="pre">destw</span></tt> or <tt class="docutils literal"><span class="pre">desth</span></tt> are different than <tt class="docutils literal"><span class="pre">w</span></tt> and <tt class="docutils literal"><span class="pre">h</span></tt></p>
</dd></dl>

<span class="target" id="draw-sprite"></span><dl class="function">
<dt id="drystal.draw_sprite">
<tt class="descclassname">drystal.</tt><tt class="descname">draw_sprite</tt><big>(</big><em>sprite: table</em>, <em>x</em>, <em>y</em><span class="optional">[</span>, <em>transform: table</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#drystal.draw_sprite" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws a sprite, from the current <a class="reference internal" href="#surface-draw-from"><em>draw from</em></a> surface.</p>
<p>Use <a class="reference internal" href="#id2"><em>Sprite</em></a> for easier sprite drawing.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Param:</th><td class="field-body">sprite must have fields x, y, w and h</td>
</tr>
<tr class="field-even field"><th class="field-name">Param:</th><td class="field-body">transform must have fields angle, wfactor and hfactor</td>
</tr>
</tbody>
</table>
<div class="code highlight-lua"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span class="kd">local</span> <span class="n">sprite</span> <span class="o">=</span> <span class="p">{</span> <span class="c1">-- the first image of a 32x32 spritesheet</span>
   <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
   <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
   <span class="n">w</span> <span class="o">=</span> <span class="mi">32</span><span class="p">,</span>
   <span class="n">h</span> <span class="o">=</span> <span class="mi">32</span><span class="p">,</span>
<span class="p">}</span>
<span class="k">function</span> <span class="nc">drystal</span><span class="p">.</span><span class="nf">draw</span><span class="p">()</span>
   <span class="o">...</span>
   <span class="n">drystal</span><span class="p">.</span><span class="n">draw_sprite</span><span class="p">(</span><span class="n">sprite</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

<dl class="function">
<dt id="drystal.draw_sprite_simple">
<tt class="descclassname">drystal.</tt><tt class="descname">draw_sprite_simple</tt><big>(</big><em>sprite: table</em>, <em>x</em>, <em>y</em><big>)</big><a class="headerlink" href="#drystal.draw_sprite_simple" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="drystal.draw_sprite_rotated">
<tt class="descclassname">drystal.</tt><tt class="descname">draw_sprite_rotated</tt><big>(</big><em>sprite: table</em>, <em>x</em>, <em>y</em>, <em>angle: float</em><big>)</big><a class="headerlink" href="#drystal.draw_sprite_rotated" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="drystal.draw_sprite_resized">
<tt class="descclassname">drystal.</tt><tt class="descname">draw_sprite_resized</tt><big>(</big><em>sprite: table</em>, <em>x</em>, <em>y</em>, <em>w</em>, <em>h</em><big>)</big><a class="headerlink" href="#drystal.draw_sprite_resized" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="blending">
<h3><a class="toc-backref" href="#id11">Blending</a><a class="headerlink" href="#blending" title="Permalink to this headline">¶</a></h3>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Images to show the differences</p>
</div>
<dl class="data">
<dt id="drystal.BLEND_DEFAULT">
<tt class="descclassname">drystal.</tt><tt class="descname">BLEND_DEFAULT</tt><a class="headerlink" href="#drystal.BLEND_DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="drystal.BLEND_ALPHA">
<tt class="descclassname">drystal.</tt><tt class="descname">BLEND_ALPHA</tt><a class="headerlink" href="#drystal.BLEND_ALPHA" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="drystal.BLEND_ADD">
<tt class="descclassname">drystal.</tt><tt class="descname">BLEND_ADD</tt><a class="headerlink" href="#drystal.BLEND_ADD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="drystal.BLEND_MULT">
<tt class="descclassname">drystal.</tt><tt class="descname">BLEND_MULT</tt><a class="headerlink" href="#drystal.BLEND_MULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="camera">
<h3><a class="toc-backref" href="#id12">Camera</a><a class="headerlink" href="#camera" title="Permalink to this headline">¶</a></h3>
<p>The camera can be used the modify position and size of the following draws.</p>
<dl class="data">
<dt id="drystal.drystal.camera.x">
<tt class="descclassname">drystal.camera.</tt><tt class="descname">x</tt><big>(</big><em>=0</em><big>)</big><a class="headerlink" href="#drystal.drystal.camera.x" title="Permalink to this definition">¶</a></dt>
<dd><p>Position of the camera (x coordinate).</p>
</dd></dl>

<dl class="data">
<dt id="drystal.drystal.camera.y">
<tt class="descclassname">drystal.camera.</tt><tt class="descname">y</tt><big>(</big><em>=0</em><big>)</big><a class="headerlink" href="#drystal.drystal.camera.y" title="Permalink to this definition">¶</a></dt>
<dd><p>Position of the camera (y coordinate).</p>
</dd></dl>

<dl class="data">
<dt id="drystal.drystal.camera.zoom">
<tt class="descclassname">drystal.camera.</tt><tt class="descname">zoom</tt><big>(</big><em>=1</em><big>)</big><a class="headerlink" href="#drystal.drystal.camera.zoom" title="Permalink to this definition">¶</a></dt>
<dd><p>Zoom of the camera. Values greater than 1 mean zoom in, less than 1 mean zoom out.</p>
</dd></dl>

<dl class="data">
<dt id="drystal.drystal.camera.angle">
<tt class="descclassname">drystal.camera.</tt><tt class="descname">angle</tt><big>(</big><em>=0</em><big>)</big><a class="headerlink" href="#drystal.drystal.camera.angle" title="Permalink to this definition">¶</a></dt>
<dd><p>Angle of the camera. You can easily apply a tilt effect with this field.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.drystal.camera.reset">
<tt class="descclassname">drystal.camera.</tt><tt class="descname">reset</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.drystal.camera.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the camera fields to default values.</p>
</dd></dl>

</div>
<div class="section" id="buffer">
<h3><a class="toc-backref" href="#id13">Buffer</a><a class="headerlink" href="#buffer" title="Permalink to this headline">¶</a></h3>
<p>A buffer can <strong>only contain one type of shape</strong> (point, line, triangle, textured triangle).</p>
<dl class="class">
<dt id="drystal.Buffer">
<em class="property">class </em><tt class="descclassname">drystal.</tt><tt class="descname">Buffer</tt><a class="headerlink" href="#drystal.Buffer" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="drystal.Buffer:use">
<tt class="descname">use</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.Buffer:use" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this buffer as current buffer.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Buffer:draw">
<tt class="descname">draw</tt><big>(</big><span class="optional">[</span><em>dx=0: float</em><span class="optional">[</span>, <em>dy=0: float</em><span class="optional">]</span><span class="optional">]</span><big>)</big><a class="headerlink" href="#drystal.Buffer:draw" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw this buffer. <tt class="docutils literal"><span class="pre">dx</span></tt> and <tt class="docutils literal"><span class="pre">dy</span></tt> can be used to offset the draw.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Buffer:reset">
<tt class="descname">reset</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.Buffer:reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes all elements from the buffer.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Buffer:upload_and_free">
<tt class="descname">upload_and_free</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.Buffer:upload_and_free" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends the buffer to the graphic card and free memory.
If a buffer is freed, you cannot call <tt class="docutils literal"><span class="pre">reset</span></tt>, <tt class="docutils literal"><span class="pre">use</span></tt> or <tt class="docutils literal"><span class="pre">upload_and_free</span></tt> anymore or errors will be thrown.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="drystal.new_buffer">
<tt class="descclassname">drystal.</tt><tt class="descname">new_buffer</tt><big>(</big><span class="optional">[</span><em>size: int</em><span class="optional">]</span><big>)</big> &rarr; Buffer<a class="headerlink" href="#drystal.new_buffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a buffer of the specified <tt class="docutils literal"><span class="pre">size</span></tt>. <tt class="docutils literal"><span class="pre">size</span></tt> must be a multiple of the number of points of the shape you put in it.
For example, if you put triangles, <tt class="docutils literal"><span class="pre">size</span></tt> must be a multiple of 3.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.use_default_buffer">
<tt class="descclassname">drystal.</tt><tt class="descname">use_default_buffer</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.use_default_buffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Tells drystal to use the default buffer.</p>
</dd></dl>

</div>
<div class="section" id="shader">
<h3><a class="toc-backref" href="#id14">Shader</a><a class="headerlink" href="#shader" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="drystal.Shader">
<em class="property">class </em><tt class="descclassname">drystal.</tt><tt class="descname">Shader</tt><a class="headerlink" href="#drystal.Shader" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="drystal.Shader:use">
<tt class="descname">use</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.Shader:use" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this shader for the following draws.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Shader:feed">
<tt class="descname">feed</tt><big>(</big><em>uniform: str</em>, <em>value: float</em><big>)</big><a class="headerlink" href="#drystal.Shader:feed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="drystal.new_shader">
<tt class="descclassname">drystal.</tt><tt class="descname">new_shader</tt><big>(</big><span class="optional">[</span><em>vertex: str</em><span class="optional">[</span>, <em>fragment_color: str</em><span class="optional">[</span>, <em>fragment_texture: str</em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><big>)</big> &rarr; Shader<a class="headerlink" href="#drystal.new_shader" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a shader with code specified.
If one of the code is <tt class="code lua docutils literal"><span class="keyword constant"><span class="pre">nil</span></span></tt>, code of the default shader is used.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.use_default_shader">
<tt class="descclassname">drystal.</tt><tt class="descname">use_default_shader</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.use_default_shader" title="Permalink to this definition">¶</a></dt>
<dd><p>Tells drystal to use the default shader.</p>
</dd></dl>

<div class="section" id="post-processing">
<h4><a class="toc-backref" href="#id15">Post processing</a><a class="headerlink" href="#post-processing" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="drystal.add_postfx">
<tt class="descclassname">drystal.</tt><tt class="descname">add_postfx</tt><big>(</big><em>name: str, code: str[, uniforms: table]) -&gt; function | (nil, error</em><big>)</big><a class="headerlink" href="#drystal.add_postfx" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a post processing effect.
The <tt class="docutils literal"><span class="pre">code</span></tt> parameter must contain a <em>effect</em> function.
Additional uniforms can be declared by the <tt class="docutils literal"><span class="pre">uniforms</span></tt> parameter.</p>
<div class="code highlight-lua"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span class="nb">assert</span><span class="p">(</span><span class="n">drystal</span><span class="p">.</span><span class="n">add_postfx</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">gray&#39;</span><span class="p">,</span> <span class="s">[[</span>
<span class="s">   vec3 effect(sampler2D tex, vec2 coord)</span>
<span class="s">   {</span>
<span class="s">       vec3 texval = texture2D(tex, coord).rgb;</span>
<span class="s">       return mix(texval, vec3((texval.r + texval.g + texval.b) / 3.0), scale);</span>
<span class="s">   }</span>
<span class="s">]]</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;</span><span class="s">scale&#39;</span><span class="p">}))</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

<dl class="function">
<dt id="drystal.postfx">
<tt class="descclassname">drystal.</tt><tt class="descname">postfx</tt><big>(</big><em>name: str</em>, <em>uniforms...: floats</em><big>)</big><a class="headerlink" href="#drystal.postfx" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div>Applies a post processing effect on the current <em>draw on</em> surface. The uniform list must have the same order than in the declaration of the effect.</div></blockquote>
<div class="code highlight-lua"><div class="highlight"><pre><span class="k">function</span> <span class="nc">drystal</span><span class="p">.</span><span class="nf">draw</span><span class="p">()</span>
   <span class="o">...</span>
   <span class="n">drystal</span><span class="p">.</span><span class="n">postfx</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">gray&#39;</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="colors">
<h3><a class="toc-backref" href="#id16">Colors</a><a class="headerlink" href="#colors" title="Permalink to this headline">¶</a></h3>
<span class="target" id="color"></span><dl class="class">
<dt id="drystal.Color">
<em class="property">class </em><tt class="descclassname">drystal.</tt><tt class="descname">Color</tt><a class="headerlink" href="#drystal.Color" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="drystal.Color:rgb">
<tt class="descname">rgb</tt><big>(</big><big>)</big> &rarr; r, g, b<a class="headerlink" href="#drystal.Color:rgb" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the RGB values of the color.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Color:hsl">
<tt class="descname">hsl</tt><big>(</big><big>)</big> &rarr; h, s, l<a class="headerlink" href="#drystal.Color:hsl" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the HSL values of the color.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Color:cmyk">
<tt class="descname">cmyk</tt><big>(</big><big>)</big> &rarr; c, m, y, k<a class="headerlink" href="#drystal.Color:cmyk" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the CMYK values of the color.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Color:add">
<tt class="descname">add</tt><big>(</big><em>color</em><big>)</big> &rarr; Color<a class="headerlink" href="#drystal.Color:add" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new Color which is the combination of the two colors using the CMYK subtractive color model.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can also use the <tt class="docutils literal"><span class="pre">+</span></tt> operator.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="drystal.Color:sub">
<tt class="descname">sub</tt><big>(</big><em>color</em><big>)</big> &rarr; Color<a class="headerlink" href="#drystal.Color:sub" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new Color which is the substraction of the two colors using the CMYK subtractive color model.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can also use the <tt class="docutils literal"><span class="pre">-</span></tt> operator.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="drystal.Color:mul">
<tt class="descname">mul</tt><big>(</big><em>color</em><big>)</big> &rarr; Color<a class="headerlink" href="#drystal.Color:mul" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new Color which is the multiplication of the two colors.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can also use the <tt class="docutils literal"><span class="pre">*</span></tt> operator.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="drystal.Color:darker">
<tt class="descname">darker</tt><big>(</big><big>)</big> &rarr; Color<a class="headerlink" href="#drystal.Color:darker" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a darker color.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Color:lighter">
<tt class="descname">lighter</tt><big>(</big><big>)</big> &rarr; Color<a class="headerlink" href="#drystal.Color:lighter" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a lighter color.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="drystal.new_color">
<tt class="descclassname">drystal.</tt><tt class="descname">new_color</tt><big>(</big><em>table</em><big>)</big> &rarr; Color<a class="headerlink" href="#drystal.new_color" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a color with the RGB color model.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Param:</th><td class="field-body"><tt class="docutils literal"><span class="pre">table</span></tt> must contains the three components.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt>
<tt class="descclassname">drystal.</tt><tt class="descname">new_color</tt><big>(</big><em>'rgb'</em>, <em>r</em>, <em>g</em>, <em>b</em><big>)</big> &rarr; Color</dt>
<dd><p>Creates a color with the RGB color model.</p>
</dd></dl>

<dl class="function">
<dt>
<tt class="descclassname">drystal.</tt><tt class="descname">new_color</tt><big>(</big><em>'hsl'</em>, <em>h</em>, <em>s</em>, <em>l</em><big>)</big> &rarr; Color</dt>
<dd><p>Creates a color with the HSL color model.</p>
</dd></dl>

<dl class="function">
<dt>
<tt class="descclassname">drystal.</tt><tt class="descname">new_color</tt><big>(</big><em>'cmyk'</em>, <em>c</em>, <em>m</em>, <em>y</em>, <em>k</em><big>)</big> &rarr; Color</dt>
<dd><p>Creates a color with the CMYK color model.</p>
</dd></dl>

<dl class="data">
<dt id="drystal.colors">
<tt class="descclassname">drystal.</tt><tt class="descname">colors</tt><a class="headerlink" href="#drystal.colors" title="Permalink to this definition">¶</a></dt>
<dd><p>This table contains all of the <a class="reference external" href="http://www.w3.org/TR/css3-color/#svg-color">W3C colors</a>.</p>
</dd></dl>

<div class="code highlight-lua"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class="code"><div class="highlight"><pre><span class="kd">local</span> <span class="n">drystal</span> <span class="o">=</span> <span class="nb">require</span> <span class="s1">&#39;</span><span class="s">drystal&#39;</span>
<span class="kd">local</span> <span class="n">color</span> <span class="o">=</span> <span class="n">drystal</span><span class="p">.</span><span class="n">colors</span><span class="p">.</span><span class="n">green</span>
<span class="k">function</span> <span class="nc">drystal</span><span class="p">.</span><span class="nf">init</span><span class="p">()</span>
       <span class="n">drystal</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span>
       <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">press d or l or m or a&#39;</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nc">drystal</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nc">drystal</span><span class="p">.</span><span class="nf">draw</span><span class="p">()</span>
       <span class="n">drystal</span><span class="p">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
       <span class="n">drystal</span><span class="p">.</span><span class="n">draw_background</span><span class="p">()</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nc">drystal</span><span class="p">.</span><span class="nf">key_press</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
       <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="s">d&#39;</span> <span class="k">then</span>
              <span class="n">color</span> <span class="o">=</span> <span class="n">color</span><span class="p">:</span><span class="n">darker</span><span class="p">()</span>
       <span class="k">end</span>
       <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="s">l&#39;</span> <span class="k">then</span>
              <span class="n">color</span> <span class="o">=</span> <span class="n">color</span><span class="p">:</span><span class="n">lighter</span><span class="p">()</span>
       <span class="k">end</span>
       <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="s">m&#39;</span> <span class="k">then</span>
              <span class="n">color</span> <span class="o">=</span> <span class="n">color</span> <span class="o">*</span> <span class="n">drystal</span><span class="p">.</span><span class="n">colors</span><span class="p">.</span><span class="n">steelblue</span>
       <span class="k">end</span>
       <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="s">a&#39;</span> <span class="k">then</span>
              <span class="n">color</span> <span class="o">=</span> <span class="n">color</span> <span class="o">+</span> <span class="n">drystal</span><span class="p">.</span><span class="n">colors</span><span class="p">.</span><span class="n">red</span>
       <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="sprite">
<h3><a class="toc-backref" href="#id17">Sprite</a><a class="headerlink" href="#sprite" title="Permalink to this headline">¶</a></h3>
<span class="target" id="id2"></span><dl class="class">
<dt id="drystal.Sprite">
<em class="property">class </em><tt class="descclassname">drystal.</tt><tt class="descname">Sprite</tt><a class="headerlink" href="#drystal.Sprite" title="Permalink to this definition">¶</a></dt>
<dd><dl class="data">
<dt id="drystal.Sprite:source">
<tt class="descname">source</tt><a class="headerlink" href="#drystal.Sprite:source" title="Permalink to this definition">¶</a></dt>
<dd><p>Source table of the sprite.
It must contain <tt class="docutils literal"><span class="pre">x</span></tt>, <tt class="docutils literal"><span class="pre">y</span></tt>, <tt class="docutils literal"><span class="pre">w</span></tt> and <tt class="docutils literal"><span class="pre">h</span></tt> fields.</p>
</dd></dl>

<dl class="data">
<dt id="drystal.Sprite:color">
<tt class="descname">color</tt><big>(</big><em>={255</em>, <em>255</em>, <em>255}</em><big>)</big><a class="headerlink" href="#drystal.Sprite:color" title="Permalink to this definition">¶</a></dt>
<dd><p>Tint of the sprite.</p>
</dd></dl>

<dl class="data">
<dt id="drystal.Sprite:alpha">
<tt class="descname">alpha</tt><big>(</big><em>=255</em><big>)</big><a class="headerlink" href="#drystal.Sprite:alpha" title="Permalink to this definition">¶</a></dt>
<dd><p>Alpha of the sprite.</p>
</dd></dl>

<dl class="data">
<dt>
<tt class="descname">x, y</tt></dt>
<dd><p>Coordinates on the screen (or any destination surface).</p>
</dd></dl>

<dl class="data">
<dt>
<tt class="descname">w, h</tt></dt>
<dd><p>Width and height of the sprite. If this is different than values from <em>source</em>, the sprite will be resized.</p>
</dd></dl>

<dl class="data">
<dt id="drystal.Sprite:angle">
<tt class="descname">angle</tt><big>(</big><em>=0</em><big>)</big><a class="headerlink" href="#drystal.Sprite:angle" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotation of the sprite.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Sprite:draw">
<tt class="descname">draw</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.Sprite:draw" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws the sprite on the current <em>draw on</em> surface.
You have to set the correct sprite sheet as <em>draw from</em> surface before use this function.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="drystal.new_sprite">
<tt class="descclassname">drystal.</tt><tt class="descname">new_sprite</tt><big>(</big><em>source: table</em><span class="optional">[</span>, <em>x=0</em>, <em>y=0</em><span class="optional">[</span>, <em>w=source.w</em>, <em>h=source.h</em><span class="optional">]</span><span class="optional">]</span><big>)</big> &rarr; Sprite<a class="headerlink" href="#drystal.new_sprite" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a sprite.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Param:</th><td class="field-body"><p class="first"><tt class="docutils literal"><span class="pre">source</span></tt> must contain the following fields:</p>
<ul class="last simple">
<li>x, y : coordinates where the sprite is located in the <em>draw_from</em> image</li>
<li>w, h : size of the sprite in the <em>draw_from</em> image</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="code highlight-lua"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span class="kd">local</span> <span class="n">surface</span> <span class="o">=</span> <span class="nb">assert</span><span class="p">(</span><span class="n">drystal</span><span class="p">.</span><span class="n">load_surface</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">spritesheet.png&#39;</span><span class="p">))</span>
<span class="kd">local</span> <span class="n">source</span> <span class="o">=</span> <span class="p">{</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">32</span> <span class="p">}</span>
<span class="kd">local</span> <span class="n">sprite</span> <span class="o">=</span> <span class="n">drystal</span><span class="p">.</span><span class="n">new_sprite</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="mi">350</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
<span class="n">sprite</span><span class="p">.</span><span class="n">update</span><span class="o">=</span><span class="k">function</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>   <span class="c1">-- custom field</span>
   <span class="n">self</span><span class="p">.</span><span class="n">angle</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">angle</span> <span class="o">+</span> <span class="n">dt</span> <span class="o">*</span> <span class="nb">math.pi</span> <span class="o">*</span> <span class="mi">2</span>
<span class="k">end</span>
<span class="k">function</span> <span class="nc">drystal</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="n">sprite</span><span class="p">:</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="k">end</span>
<span class="k">function</span> <span class="nc">drystal</span><span class="p">.</span><span class="nf">draw</span><span class="p">()</span>
    <span class="o">...</span> <span class="c1">-- draw background, etc</span>
    <span class="n">surface</span><span class="p">:</span><span class="n">draw_from</span><span class="p">()</span>
    <span class="n">sprite</span><span class="p">:</span><span class="n">draw</span><span class="p">()</span>
<span class="k">end</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="font-rendering">
<h2><a class="toc-backref" href="#id18">Font rendering</a><a class="headerlink" href="#font-rendering" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="drystal.Font">
<em class="property">class </em><tt class="descclassname">drystal.</tt><tt class="descname">Font</tt><a class="headerlink" href="#drystal.Font" title="Permalink to this definition">¶</a></dt>
<dd><span class="target" id="font-draw"></span><dl class="method">
<dt id="drystal.Font:draw">
<tt class="descname">draw</tt><big>(</big><em>text: str</em>, <em>x</em>, <em>y</em><span class="optional">[</span>, <em>alignment=1: int</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#drystal.Font:draw" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws <tt class="docutils literal"><span class="pre">text</span></tt> at the given coordinates.
Supports &#8216;\n&#8217;.
A particular syntax can be used to create some text effects, for example:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="code lua docutils literal"><span class="literal string double"><span class="pre">&quot;</span></span><span class="literal string"><span class="pre">test</span> <span class="pre">{r:255|g:0|b:0|!}&quot;</span></span></tt> will print the <tt class="docutils literal"><span class="pre">!</span></tt> in red,</li>
<li><tt class="code lua docutils literal"><span class="literal string double"><span class="pre">&quot;</span></span><span class="literal string"><span class="pre">{outline|outg:255|t{nooutline|e}st}&quot;</span></span></tt> will print <tt class="docutils literal"><span class="pre">test</span></tt> with a green outline, except the <tt class="docutils literal"><span class="pre">e</span></tt>.</li>
</ul>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Param:</th><td class="field-body"><ul class="first last simple">
<li>if alignment is <tt class="docutils literal"><span class="pre">drystal.ALIGN_LEFT</span></tt>, text is left aligned (default)</li>
<li>if alignment is <tt class="docutils literal"><span class="pre">drystal.ALIGN_CENTER</span></tt>, text is centered around <tt class="docutils literal"><span class="pre">x</span></tt>.</li>
<li>if alignment is <tt class="docutils literal"><span class="pre">drystal.ALIGN_RIGHT</span></tt>, text is right aligned <tt class="docutils literal"><span class="pre">x</span></tt>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="font-draw-plain"></span><dl class="method">
<dt id="drystal.Font:draw_plain">
<tt class="descname">draw_plain</tt><big>(</big><em>text: str</em>, <em>x</em>, <em>y</em><big>)</big><a class="headerlink" href="#drystal.Font:draw_plain" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#font-draw"><em>draw</em></a>, except it doesn&#8217;t align nor accept formating.
Use this function for faster text drawing.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Font:sizeof">
<tt class="descname">sizeof</tt><big>(</big><em>text</em><big>)</big> &rarr; float, float<a class="headerlink" href="#drystal.Font:sizeof" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns width and height the text would use if it was drawn on the screen.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Font:sizeof_plain">
<tt class="descname">sizeof_plain</tt><big>(</big><em>text</em><big>)</big><a class="headerlink" href="#drystal.Font:sizeof_plain" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns width and height the text would use if it was drawn on the screen by <a class="reference internal" href="#font-draw-plain"><em>draw_plain</em></a>.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="drystal.load_font">
<tt class="descclassname">drystal.</tt><tt class="descname">load_font</tt><big>(</big><em>filename: str</em>, <em>size: float) -&gt; Font | (nil</em>, <em>error</em><big>)</big><a class="headerlink" href="#drystal.load_font" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a truetype font (.ttf file) at desired size.</p>
</dd></dl>

</div>
<div class="section" id="particle-system">
<h2><a class="toc-backref" href="#id19">Particle System</a><a class="headerlink" href="#particle-system" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="drystal.System">
<em class="property">class </em><tt class="descclassname">drystal.</tt><tt class="descname">System</tt><a class="headerlink" href="#drystal.System" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="drystal.System:start">
<tt class="descname">start</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.System:start" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts emitting over time.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.System:pause">
<tt class="descname">pause</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.System:pause" title="Permalink to this definition">¶</a></dt>
<dd><p>Pauses emitting over time.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.System:emit">
<tt class="descname">emit</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.System:emit" title="Permalink to this definition">¶</a></dt>
<dd><p>Emits one particle. This function is useful when the system is paused and you want a fixed number of particle emission at one particular frame. You still need to call <em>update</em> so the particles get updated.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.System:stop">
<tt class="descname">stop</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.System:stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops emitting over time.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.System:draw">
<tt class="descname">draw</tt><big>(</big><em>[x=0: float[, y=0: float])</em><big>)</big><a class="headerlink" href="#drystal.System:draw" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws the particles of the system. <tt class="docutils literal"><span class="pre">x</span></tt> and <tt class="docutils literal"><span class="pre">y</span></tt> can be used as offset.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.System:update">
<tt class="descname">update</tt><big>(</big><em>dt: float</em><big>)</big><a class="headerlink" href="#drystal.System:update" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the system and emits some particles according to the emission rate if the system is running.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.System:is_running">
<tt class="descname">is_running</tt><big>(</big><big>)</big> &rarr; boolean<a class="headerlink" href="#drystal.System:is_running" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <tt class="docutils literal"><span class="pre">true</span></tt> if the system is started.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.System:set_running">
<tt class="descname">set_running</tt><big>(</big><em>run: boolean</em><big>)</big><a class="headerlink" href="#drystal.System:set_running" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts or stops the system.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.System:add_size">
<tt class="descname">add_size</tt><big>(</big><em>at_lifetime</em>, <em>size</em><big>)</big><a class="headerlink" href="#drystal.System:add_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a size at a desired particle&#8217;s lifetime.
<cite>at_lifetime</cite> is a float between 0 and 1 which indicate when the specified size has to be the current particle size.</p>
</dd></dl>

<dl class="method">
<dt>
<tt class="descname">add_size</tt><big>(</big><em>at_lifetime</em>, <em>minsize</em>, <em>maxsize</em><big>)</big></dt>
<dd><p>Adds a random size at a desired particle&#8217;s lifetime.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.System:add_color">
<tt class="descname">add_color</tt><big>(</big><em>at_lifetime</em>, <em>r</em>, <em>g</em>, <em>b</em><big>)</big><a class="headerlink" href="#drystal.System:add_color" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a color at a desired particle&#8217;s lifetime.
<cite>at_lifetime</cite> is a float between 0 and 1 which indicate when the specified color has to be the current particle color.</p>
</dd></dl>

<dl class="method">
<dt>
<tt class="descname">add_color</tt><big>(</big><em>at_lifetime</em>, <em>minr</em>, <em>maxr</em>, <em>ming</em>, <em>maxg</em>, <em>minb</em>, <em>maxg</em><big>)</big></dt>
<dd><p>Adds a random color at a desired particle&#8217;s lifetime.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.System:set_position">
<tt class="descname">set_position</tt><big>(</big><em>x: float</em>, <em>y: float</em><big>)</big><a class="headerlink" href="#drystal.System:set_position" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the position of the system.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.System:get_position">
<tt class="descname">get_position</tt><big>(</big><big>)</big> &rarr; float, float<a class="headerlink" href="#drystal.System:get_position" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the position of the system.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.System:set_offset">
<tt class="descname">set_offset</tt><big>(</big><em>x: float</em>, <em>y: float</em><big>)</big><a class="headerlink" href="#drystal.System:set_offset" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the maximum position offset of a particle when emitted.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.System:get_offset">
<tt class="descname">get_offset</tt><big>(</big><big>)</big> &rarr; float, float<a class="headerlink" href="#drystal.System:get_offset" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the position offset of a particle when emitted.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.System:set_emission_rate">
<tt class="descname">set_emission_rate</tt><big>(</big><em>frequency: float</em><big>)</big><a class="headerlink" href="#drystal.System:set_emission_rate" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the emission rate of the system (in Hertz).</p>
</dd></dl>

<dl class="method">
<dt id="drystal.System:get_emission_rate">
<tt class="descname">get_emission_rate</tt><big>(</big><big>)</big> &rarr; float<a class="headerlink" href="#drystal.System:get_emission_rate" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the emission rate of the system (in Hertz).</p>
</dd></dl>

<dl class="method">
<dt id="drystal.System:set_lifetime">
<tt class="descname">set_lifetime</tt><big>(</big><em>min: float</em><span class="optional">[</span>, <em>max=min: float</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#drystal.System:set_lifetime" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the lifetime of the particles.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.System:get_lifetime">
<tt class="descname">get_lifetime</tt><big>(</big><big>)</big> &rarr; float, float<a class="headerlink" href="#drystal.System:get_lifetime" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the lifetime of the particles.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="drystal.new_system">
<tt class="descclassname">drystal.</tt><tt class="descname">new_system</tt><big>(</big><em>x</em>, <em>y</em><big>)</big> &rarr; System<a class="headerlink" href="#drystal.new_system" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Creates a new particle system at given position.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">By default, attributes are initialized with random values. Make sure to call appropriate setters to obtain the desired particle effect.</p>
</div>
</div>
<div class="section" id="physics">
<h2><a class="toc-backref" href="#id20">Physics</a><a class="headerlink" href="#physics" title="Permalink to this headline">¶</a></h2>
<p>Learning how to use <a class="reference external" href="http://box2d.org/">Box2D</a> will help to hunder Drystal&#8217;s physics module.</p>
<dl class="function">
<dt id="drystal.init_physics">
<tt class="descclassname">drystal.</tt><tt class="descname">init_physics</tt><big>(</big><em>gravity_x: float</em>, <em>gravity_y: float</em><span class="optional">[</span>, <em>pixels_per_meter</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#drystal.init_physics" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#set-pixels-per-meter"><em>set_pixels_per_meter</em></a>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If <tt class="docutils literal"><span class="pre">init_physics</span></tt> is not called before other physics functions, errors will occur.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="drystal.update_physics">
<tt class="descclassname">drystal.</tt><tt class="descname">update_physics</tt><big>(</big><em>dt: float</em><span class="optional">[</span>, <em>timestep=0.01</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#drystal.update_physics" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the world.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.get_gravity">
<tt class="descclassname">drystal.</tt><tt class="descname">get_gravity</tt><big>(</big><big>)</big> &rarr; float, float<a class="headerlink" href="#drystal.get_gravity" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the gravity of the world.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.set_gravity">
<tt class="descclassname">drystal.</tt><tt class="descname">set_gravity</tt><big>(</big><em>x</em>, <em>y</em><big>)</big><a class="headerlink" href="#drystal.set_gravity" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the gravity of the world.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.get_pixels_per_meter">
<tt class="descclassname">drystal.</tt><tt class="descname">get_pixels_per_meter</tt><big>(</big><big>)</big> &rarr; float<a class="headerlink" href="#drystal.get_pixels_per_meter" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the ratio used to convert coordinates and forces to/from Box2D.</p>
</dd></dl>

<span class="target" id="set-pixels-per-meter"></span><dl class="function">
<dt id="drystal.set_pixels_per_meter">
<tt class="descclassname">drystal.</tt><tt class="descname">set_pixels_per_meter</tt><big>(</big><em>pixels_per_meter: float</em><big>)</big><a class="headerlink" href="#drystal.set_pixels_per_meter" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the ratio used to convert coordinates and forces to/from Box2D.
For example, if you set the ratio to <tt class="docutils literal"><span class="pre">64</span></tt>, this means a circle with a radius of 64 will have a radius of 1 meter in the Box2d world.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.on_collision">
<tt class="descclassname">drystal.</tt><tt class="descname">on_collision</tt><big>(</big><em>on_begin</em>, <em>on_end</em>, <em>on_presolve</em>, <em>on_postsolve</em><big>)</big><a class="headerlink" href="#drystal.on_collision" title="Permalink to this definition">¶</a></dt>
<dd><p>Hooks some callbacks to the collision listener.</p>
<ul class="simple">
<li><tt class="code lua docutils literal"><span class="name"><span class="pre">on_begin</span></span><span class="punctuation"><span class="pre">(</span></span><span class="name"><span class="pre">body1</span></span><span class="punctuation"><span class="pre">,</span></span> <span class="name"><span class="pre">body2</span></span><span class="punctuation"><span class="pre">,</span></span> <span class="name"><span class="pre">x</span></span><span class="punctuation"><span class="pre">,</span></span> <span class="name"><span class="pre">y</span></span><span class="punctuation"><span class="pre">,</span></span> <span class="name"><span class="pre">normalx</span></span><span class="punctuation"><span class="pre">,</span></span> <span class="name"><span class="pre">normaly</span></span><span class="punctuation"><span class="pre">)</span></span></tt></li>
<li><tt class="code lua docutils literal"><span class="name"><span class="pre">on_end</span></span><span class="punctuation"><span class="pre">(</span></span><span class="name"><span class="pre">body1</span></span><span class="punctuation"><span class="pre">,</span></span> <span class="name"><span class="pre">body2</span></span><span class="punctuation"><span class="pre">)</span></span></tt></li>
<li><tt class="code lua docutils literal"><span class="name"><span class="pre">on_presolve</span></span><span class="punctuation"><span class="pre">(</span></span><span class="name"><span class="pre">body1</span></span><span class="punctuation"><span class="pre">,</span></span> <span class="name"><span class="pre">body2</span></span><span class="punctuation"><span class="pre">,</span></span> <span class="name"><span class="pre">x</span></span><span class="punctuation"><span class="pre">,</span></span> <span class="name"><span class="pre">y</span></span><span class="punctuation"><span class="pre">,</span></span> <span class="name"><span class="pre">normalx</span></span><span class="punctuation"><span class="pre">,</span></span> <span class="name"><span class="pre">normaly</span></span><span class="punctuation"><span class="pre">)</span></span> <span class="operator"><span class="pre">-&gt;</span></span> <span class="name"><span class="pre">boolean</span></span></tt></li>
<li><tt class="code lua docutils literal"><span class="name"><span class="pre">on_postsolve</span></span><span class="punctuation"><span class="pre">(</span></span><span class="name"><span class="pre">body1</span></span><span class="punctuation"><span class="pre">,</span></span> <span class="name"><span class="pre">body2</span></span><span class="punctuation"><span class="pre">)</span></span></tt></li>
</ul>
</dd></dl>

<dl class="function">
<dt id="drystal.raycast">
<tt class="descclassname">drystal.</tt><tt class="descname">raycast</tt><big>(</big><em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em>, <em>'any' | 'closest' | 'farthest'</em><big>)</big> &rarr; body, x, y<a class="headerlink" href="#drystal.raycast" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns any body, the closest or the farthest found during a raycast from <tt class="docutils literal"><span class="pre">(x1,</span> <span class="pre">y1)</span></tt> to <tt class="docutils literal"><span class="pre">(x2,</span> <span class="pre">y2)</span></tt>.
It also returns the point of collision.</p>
</dd></dl>

<dl class="function">
<dt>
<tt class="descclassname">drystal.</tt><tt class="descname">raycast</tt><big>(</big><em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em>, <em>'all'</em><big>)</big> &rarr; bodies, points</dt>
<dd><p>Returns all the bodies found during a raycast from <tt class="docutils literal"><span class="pre">(x1,</span> <span class="pre">y1)</span></tt> to <tt class="docutils literal"><span class="pre">(x2,</span> <span class="pre">y2)</span></tt>.
It also returns the points of collision.</p>
</dd></dl>

<dl class="function">
<dt>
<tt class="descclassname">drystal.</tt><tt class="descname">raycast</tt><big>(</big><em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em>, <em>callback</em><big>)</big> &rarr; body, x, y</dt>
<dd><p><tt class="code lua docutils literal"><span class="name"><span class="pre">callback</span></span><span class="punctuation"><span class="pre">(</span></span><span class="name"><span class="pre">body</span></span><span class="punctuation"><span class="pre">,</span></span> <span class="name"><span class="pre">fraction</span></span><span class="punctuation"><span class="pre">,</span></span> <span class="name"><span class="pre">x</span></span><span class="punctuation"><span class="pre">,</span></span> <span class="name"><span class="pre">y</span></span><span class="punctuation"><span class="pre">)</span></span> <span class="operator"><span class="pre">-&gt;</span></span> <span class="name"><span class="pre">float</span></span><span class="punctuation"><span class="pre">,</span></span> <span class="name"><span class="pre">boolean</span></span></tt>
The callback should returns a float and a boolean.
The float works like described <a class="reference external" href="http://www.iforce2d.net/b2dtut/world-querying">here</a>.
If the boolean is <cite>false</cite> then the body and position is not kept for the returned values of <cite>raycast</cite>, which means you can select which values you want to return.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.query">
<tt class="descclassname">drystal.</tt><tt class="descname">query</tt><big>(</big><em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em><big>)</big> &rarr; table<a class="headerlink" href="#drystal.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a table with all bodies contained inside the area defined by <tt class="docutils literal"><span class="pre">x1</span></tt>, <tt class="docutils literal"><span class="pre">y1</span></tt>, <tt class="docutils literal"><span class="pre">x2</span></tt> and <tt class="docutils literal"><span class="pre">y2</span></tt>.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.new_shape">
<tt class="descclassname">drystal.</tt><tt class="descname">new_shape</tt><big>(</big><em>'box'</em>, <em>width</em>, <em>height</em>, <em>x</em>, <em>y</em><big>)</big> &rarr; Shape<a class="headerlink" href="#drystal.new_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a <em>box</em> shape.
The box is centered on x,y which means you have to add an offset of width/2,height/2 during your draws.</p>
</dd></dl>

<dl class="function">
<dt>
<tt class="descclassname">drystal.</tt><tt class="descname">new_shape</tt><big>(</big><em>'circle'</em>, <em>radius</em>, <em>x</em>, <em>y</em><big>)</big> &rarr; Shape</dt>
<dd><p>Creates a <em>circle</em> shape.</p>
</dd></dl>

<dl class="function">
<dt>
<tt class="descclassname">drystal.</tt><tt class="descname">new_shape</tt><big>(</big><em>'chain'</em>, <em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em>, <em>...</em><big>)</big> &rarr; Shape</dt>
<dd><p>Creates a <em>chain</em> shape. The last point will be linked to the first one.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.new_body">
<tt class="descclassname">drystal.</tt><tt class="descname">new_body</tt><big>(</big><em>is_dynamic: boolean</em>, <span class="optional">[</span><em>x</em>, <em>y</em>, <span class="optional">]</span><em>shape1</em>, <em>shape2</em>, <em>...</em><big>)</big> &rarr; Body<a class="headerlink" href="#drystal.new_body" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a body at the given position (or 0, 0) with the given shapes. If <tt class="docutils literal"><span class="pre">is_dynamic</span></tt> is false, the body will be static.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.new_joint">
<tt class="descclassname">drystal.</tt><tt class="descname">new_joint</tt><big>(</big><em>'mouse'</em>, <em>body1</em>, <em>body2</em>, <em>max_force</em><span class="optional">[</span>, <em>collide_connected</em><span class="optional">]</span><big>)</big> &rarr; MouseJoint<a class="headerlink" href="#drystal.new_joint" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a mouse joint.</p>
</dd></dl>

<dl class="function">
<dt>
<tt class="descclassname">drystal.</tt><tt class="descname">new_joint</tt><big>(</big><em>'distance'</em>, <em>body1</em>, <em>body2</em><span class="optional">[</span>, <em>collide_connected</em><span class="optional">]</span><big>)</big> &rarr; DistanceJoint</dt>
<dd><p>Creates a distance joint.</p>
</dd></dl>

<dl class="function">
<dt>
<tt class="descclassname">drystal.</tt><tt class="descname">new_joint</tt><big>(</big><em>'rope'</em>, <em>body1</em>, <em>body2</em><span class="optional">[</span>, <em>collide_connected</em><span class="optional">]</span><big>)</big> &rarr; RopeJoint</dt>
<dd><p>Creates a rope joint.</p>
</dd></dl>

<dl class="function">
<dt>
<tt class="descclassname">drystal.</tt><tt class="descname">new_joint</tt><big>(</big><em>'revolute'</em>, <em>body1</em>, <em>body2</em>, <em>anchor1x</em>, <em>anchor1y</em>, <em>anchor2x</em>, <em>anchor2y</em><span class="optional">[</span>, <em>collide_connected</em><span class="optional">]</span><big>)</big> &rarr; RevoluteJoint</dt>
<dd><p>Creates a revolute joint.</p>
</dd></dl>

<dl class="function">
<dt>
<tt class="descclassname">drystal.</tt><tt class="descname">new_joint</tt><big>(</big><em>'gear'</em>, <em>body1</em>, <em>body2</em>, <em>joint1</em>, <em>joint2</em>, <em>ratio</em><span class="optional">[</span>, <em>collide_connected</em><span class="optional">]</span><big>)</big> &rarr; GearJoint</dt>
<dd><p>Creates a gear joint. <tt class="docutils literal"><span class="pre">joint1</span></tt> and <tt class="docutils literal"><span class="pre">joint2</span></tt> must be either revolute joints or a prismatic joints.</p>
</dd></dl>

<dl class="function">
<dt>
<tt class="descclassname">drystal.</tt><tt class="descname">new_joint</tt><big>(</big><em>'prismatic'</em>, <em>body1</em>, <em>body2</em>, <em>anchor1x</em>, <em>anchor1y</em>, <em>anchor2x</em>, <em>anchor2y</em>, <em>axisx</em>, <em>axisy</em><span class="optional">[</span>, <em>collide_connected</em><span class="optional">]</span><big>)</big> &rarr; PrismaticJoint</dt>
<dd><p>Creates a prismatic joint.</p>
</dd></dl>

<dl class="class">
<dt id="drystal.Shape">
<em class="property">class </em><tt class="descclassname">drystal.</tt><tt class="descname">Shape</tt><a class="headerlink" href="#drystal.Shape" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="drystal.Shape:set_density">
<tt class="descname">set_density</tt><big>(</big><em>density: float</em><big>)</big><a class="headerlink" href="#drystal.Shape:set_density" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the density of the shape.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Shape:get_density">
<tt class="descname">get_density</tt><big>(</big><big>)</big> &rarr; float<a class="headerlink" href="#drystal.Shape:get_density" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the density of the shape.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Shape:set_restitution">
<tt class="descname">set_restitution</tt><big>(</big><em>restitution float</em><big>)</big><a class="headerlink" href="#drystal.Shape:set_restitution" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the restitution of the shape.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Shape:get_restitution">
<tt class="descname">get_restitution</tt><big>(</big><big>)</big> &rarr; float<a class="headerlink" href="#drystal.Shape:get_restitution" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the restitution of the shape.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Shape:set_friction">
<tt class="descname">set_friction</tt><big>(</big><em>friction float</em><big>)</big><a class="headerlink" href="#drystal.Shape:set_friction" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the friction of the shape.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Shape:get_friction">
<tt class="descname">get_friction</tt><big>(</big><big>)</big> &rarr; float<a class="headerlink" href="#drystal.Shape:get_friction" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the friction of the shape.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Shape:set_sensor">
<tt class="descname">set_sensor</tt><big>(</big><em>sensor: boolean</em><big>)</big><a class="headerlink" href="#drystal.Shape:set_sensor" title="Permalink to this definition">¶</a></dt>
<dd><p>If <tt class="docutils literal"><span class="pre">sensor</span></tt> is <tt class="docutils literal"><span class="pre">true</span></tt>, the shape will not collide but the <tt class="docutils literal"><span class="pre">on_collision</span></tt> callback will be called.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="drystal.Body">
<em class="property">class </em><tt class="descclassname">drystal.</tt><tt class="descname">Body</tt><a class="headerlink" href="#drystal.Body" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="drystal.Body:set_position">
<tt class="descname">set_position</tt><big>(</big><em>x: float</em>, <em>y: float</em><big>)</big><a class="headerlink" href="#drystal.Body:set_position" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the position of the body.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Body:get_position">
<tt class="descname">get_position</tt><big>(</big><big>)</big> &rarr; float, float<a class="headerlink" href="#drystal.Body:get_position" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the position of the body.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Body:set_angle">
<tt class="descname">set_angle</tt><big>(</big><em>angle: float</em><big>)</big><a class="headerlink" href="#drystal.Body:set_angle" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the angle of the body.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Body:get_angle">
<tt class="descname">get_angle</tt><big>(</big><big>)</big> &rarr; float<a class="headerlink" href="#drystal.Body:get_angle" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the angle of the body.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Body:set_linear_velocity">
<tt class="descname">set_linear_velocity</tt><big>(</big><em>x: float</em>, <em>y: float</em><big>)</big><a class="headerlink" href="#drystal.Body:set_linear_velocity" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the linear velocity of the body.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Body:get_linear_velocity">
<tt class="descname">get_linear_velocity</tt><big>(</big><big>)</big> &rarr; float, float<a class="headerlink" href="#drystal.Body:get_linear_velocity" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the linear velocity of the body.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Body:set_angular_velocity">
<tt class="descname">set_angular_velocity</tt><big>(</big><em>x: float</em>, <em>y: float</em><big>)</big><a class="headerlink" href="#drystal.Body:set_angular_velocity" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the angular velocity of the body.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Body:get_angular_velocity">
<tt class="descname">get_angular_velocity</tt><big>(</big><big>)</big> &rarr; float, float<a class="headerlink" href="#drystal.Body:get_angular_velocity" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the angular velocity of the body.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Body:set_linear_damping">
<tt class="descname">set_linear_damping</tt><big>(</big><em>damping: float</em><big>)</big><a class="headerlink" href="#drystal.Body:set_linear_damping" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the linear damping of the body.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Body:get_linear_damping">
<tt class="descname">get_linear_damping</tt><big>(</big><big>)</big> &rarr; float<a class="headerlink" href="#drystal.Body:get_linear_damping" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the linear damping of the body.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Body:set_angular_damping">
<tt class="descname">set_angular_damping</tt><big>(</big><em>damping: float</em><big>)</big><a class="headerlink" href="#drystal.Body:set_angular_damping" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the angular damping of the body.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Body:get_angular_damping">
<tt class="descname">get_angular_damping</tt><big>(</big><big>)</big> &rarr; float<a class="headerlink" href="#drystal.Body:get_angular_damping" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the angular damping of the body.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Body:set_fixed_rotation">
<tt class="descname">set_fixed_rotation</tt><big>(</big><em>fixed: boolean</em><big>)</big><a class="headerlink" href="#drystal.Body:set_fixed_rotation" title="Permalink to this definition">¶</a></dt>
<dd><p>Fixes the rotation of the body.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Body:get_fixed_rotation">
<tt class="descname">get_fixed_rotation</tt><big>(</big><big>)</big> &rarr; boolean<a class="headerlink" href="#drystal.Body:get_fixed_rotation" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <tt class="docutils literal"><span class="pre">true</span></tt> if the body has fixed rotation.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Body:set_active">
<tt class="descname">set_active</tt><big>(</big><em>active: boolean</em><big>)</big><a class="headerlink" href="#drystal.Body:set_active" title="Permalink to this definition">¶</a></dt>
<dd><p>Enables or disables a body.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Body:set_bullet">
<tt class="descname">set_bullet</tt><big>(</big><em>bullet: boolean</em><big>)</big><a class="headerlink" href="#drystal.Body:set_bullet" title="Permalink to this definition">¶</a></dt>
<dd><p>Marks the body as a fast moving object.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Body:get_mass">
<tt class="descname">get_mass</tt><big>(</big><big>)</big> &rarr; float<a class="headerlink" href="#drystal.Body:get_mass" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the mass of the body.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Body:set_mass_center">
<tt class="descname">set_mass_center</tt><big>(</big><em>x</em>, <em>y</em><big>)</big><a class="headerlink" href="#drystal.Body:set_mass_center" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the mass center.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Body:apply_force">
<tt class="descname">apply_force</tt><big>(</big><em>x</em>, <em>y</em><span class="optional">[</span>, <em>x</em>, <em>y</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#drystal.Body:apply_force" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a force (by default, x, y are the body&#8217;s center).</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Body:apply_linear_impulse">
<tt class="descname">apply_linear_impulse</tt><big>(</big><em>x</em>, <em>y</em><big>)</big><a class="headerlink" href="#drystal.Body:apply_linear_impulse" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a linear impulse (by default, x, y are the body&#8217;s center).</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Body:apply_angular_impulse">
<tt class="descname">apply_angular_impulse</tt><big>(</big><em>angle</em><big>)</big><a class="headerlink" href="#drystal.Body:apply_angular_impulse" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a angular impulse.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Body:apply_torque">
<tt class="descname">apply_torque</tt><big>(</big><em>torque</em><big>)</big><a class="headerlink" href="#drystal.Body:apply_torque" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a torque.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Body:dump">
<tt class="descname">dump</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.Body:dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints Box2D attributes of the body.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Body:destroy">
<tt class="descname">destroy</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.Body:destroy" title="Permalink to this definition">¶</a></dt>
<dd><p>Destroys the body.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Once the body is destroy, you cannot call any of its functions anymore. Make sure to remove references (<tt class="code lua docutils literal"><span class="name"><span class="pre">my_body</span></span> <span class="operator"><span class="pre">=</span></span> <span class="keyword constant"><span class="pre">nil</span></span></tt>).</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Associated joints are destroyed too. Calling functions on those joints will throw an error, make sure to remove references (<tt class="code lua docutils literal"><span class="name"><span class="pre">my_joint</span></span> <span class="operator"><span class="pre">=</span></span> <span class="keyword constant"><span class="pre">nil</span></span></tt>).</p>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="drystal.MouseJoint">
<em class="property">class </em><tt class="descclassname">drystal.</tt><tt class="descname">MouseJoint</tt><a class="headerlink" href="#drystal.MouseJoint" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="drystal.MouseJoint:set_target">
<tt class="descname">set_target</tt><big>(</big><em>x</em>, <em>y</em><big>)</big><a class="headerlink" href="#drystal.MouseJoint:set_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the target position of the joint.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.MouseJoint:destroy">
<tt class="descname">destroy</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.MouseJoint:destroy" title="Permalink to this definition">¶</a></dt>
<dd><p>Destroys the joint.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="drystal.RopeJoint">
<em class="property">class </em><tt class="descclassname">drystal.</tt><tt class="descname">RopeJoint</tt><a class="headerlink" href="#drystal.RopeJoint" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="drystal.RopeJoint:set_max_length">
<tt class="descname">set_max_length</tt><big>(</big><em>max_length: float</em><big>)</big><a class="headerlink" href="#drystal.RopeJoint:set_max_length" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the maximum length of the joint</p>
</dd></dl>

<dl class="method">
<dt id="drystal.RopeJoint:destroy">
<tt class="descname">destroy</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.RopeJoint:destroy" title="Permalink to this definition">¶</a></dt>
<dd><p>Destroys the joint.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="drystal.DistanceJoint">
<em class="property">class </em><tt class="descclassname">drystal.</tt><tt class="descname">DistanceJoint</tt><a class="headerlink" href="#drystal.DistanceJoint" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="drystal.DistanceJoint:set_length">
<tt class="descname">set_length</tt><big>(</big><em>length: float</em><big>)</big><a class="headerlink" href="#drystal.DistanceJoint:set_length" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the length of the joint</p>
</dd></dl>

<dl class="method">
<dt id="drystal.DistanceJoint:set_frequency">
<tt class="descname">set_frequency</tt><big>(</big><em>frequency: float</em><big>)</big><a class="headerlink" href="#drystal.DistanceJoint:set_frequency" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the frequency of the joint.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.DistanceJoint:destroy">
<tt class="descname">destroy</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.DistanceJoint:destroy" title="Permalink to this definition">¶</a></dt>
<dd><p>Destroys the joint.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="drystal.RevoluteJoint">
<em class="property">class </em><tt class="descclassname">drystal.</tt><tt class="descname">RevoluteJoint</tt><a class="headerlink" href="#drystal.RevoluteJoint" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="drystal.RevoluteJoint:set_angle_limits">
<tt class="descname">set_angle_limits</tt><big>(</big><em>min</em>, <em>max</em><big>)</big><a class="headerlink" href="#drystal.RevoluteJoint:set_angle_limits" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the angle limits of the joint. If <tt class="docutils literal"><span class="pre">min</span></tt> equals <tt class="docutils literal"><span class="pre">max</span></tt>, limits are disabled.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.RevoluteJoint:set_motor_speed">
<tt class="descname">set_motor_speed</tt><big>(</big><em>speed: float</em><span class="optional">[</span>, <em>maxtorque=20: float</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#drystal.RevoluteJoint:set_motor_speed" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the motor speed. If <tt class="docutils literal"><span class="pre">speed</span></tt> is 0, motor is disabled.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.RevoluteJoint:destroy">
<tt class="descname">destroy</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.RevoluteJoint:destroy" title="Permalink to this definition">¶</a></dt>
<dd><p>Destroys the joint.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="drystal.PrismaticJoint">
<em class="property">class </em><tt class="descclassname">drystal.</tt><tt class="descname">PrismaticJoint</tt><a class="headerlink" href="#drystal.PrismaticJoint" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="drystal.PrismaticJoint:set_motor_speed">
<tt class="descname">set_motor_speed</tt><big>(</big><em>speed: float</em><big>)</big><a class="headerlink" href="#drystal.PrismaticJoint:set_motor_speed" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the motor speed.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.PrismaticJoint:set_max_motor_force">
<tt class="descname">set_max_motor_force</tt><big>(</big><em>force: float</em><big>)</big><a class="headerlink" href="#drystal.PrismaticJoint:set_max_motor_force" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the maximum motor force.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.PrismaticJoint:set_enable_motor">
<tt class="descname">set_enable_motor</tt><big>(</big><em>enable: boolean</em><big>)</big><a class="headerlink" href="#drystal.PrismaticJoint:set_enable_motor" title="Permalink to this definition">¶</a></dt>
<dd><p>Enables or disables the motor.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.PrismaticJoint:set_enable_limit">
<tt class="descname">set_enable_limit</tt><big>(</big><em>enable: boolean</em><big>)</big><a class="headerlink" href="#drystal.PrismaticJoint:set_enable_limit" title="Permalink to this definition">¶</a></dt>
<dd><p>Enables or disables the limit.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.PrismaticJoint:is_limit_enabled">
<tt class="descname">is_limit_enabled</tt><big>(</big><big>)</big> &rarr; boolean<a class="headerlink" href="#drystal.PrismaticJoint:is_limit_enabled" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <tt class="docutils literal"><span class="pre">true</span></tt> if the joint has limit.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.PrismaticJoint:is_motor_enabled">
<tt class="descname">is_motor_enabled</tt><big>(</big><big>)</big> &rarr; boolean<a class="headerlink" href="#drystal.PrismaticJoint:is_motor_enabled" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <tt class="docutils literal"><span class="pre">true</span></tt> if the motor is enabled.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.PrismaticJoint:destroy">
<tt class="descname">destroy</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.PrismaticJoint:destroy" title="Permalink to this definition">¶</a></dt>
<dd><p>Destroys the joint.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="audio">
<h2><a class="toc-backref" href="#id21">Audio</a><a class="headerlink" href="#audio" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="drystal.Music">
<em class="property">class </em><tt class="descclassname">drystal.</tt><tt class="descname">Music</tt><a class="headerlink" href="#drystal.Music" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="drystal.Music:play">
<tt class="descname">play</tt><big>(</big><span class="optional">[</span><em>loop=false: bool</em><span class="optional">[</span>, <em>onend_callback: function</em><span class="optional">]</span><span class="optional">]</span><big>)</big><a class="headerlink" href="#drystal.Music:play" title="Permalink to this definition">¶</a></dt>
<dd><p>Plays the music (from the beginning). If <tt class="docutils literal"><span class="pre">loop</span></tt> is true, the music will loop forever.
<tt class="docutils literal"><span class="pre">onend_callback</span></tt> is called when the music finishes (and is not called by :stop()).</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Music:set_pitch">
<tt class="descname">set_pitch</tt><big>(</big><em>pitch: float</em><big>)</big><a class="headerlink" href="#drystal.Music:set_pitch" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the pitch of the music. <tt class="docutils literal"><span class="pre">pitch</span></tt> must be &gt;= 0.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Music:set_volume">
<tt class="descname">set_volume</tt><big>(</big><em>volume: float</em><big>)</big><a class="headerlink" href="#drystal.Music:set_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the volume of the music. <tt class="docutils literal"><span class="pre">volume</span></tt> must be &gt;= 0.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Music:pause">
<tt class="descname">pause</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.Music:pause" title="Permalink to this definition">¶</a></dt>
<dd><p>Pauses the music.</p>
</dd></dl>

<dl class="method">
<dt id="drystal.Music:stop">
<tt class="descname">stop</tt><big>(</big><big>)</big><a class="headerlink" href="#drystal.Music:stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops the music.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="drystal.load_music">
<tt class="descclassname">drystal.</tt><tt class="descname">load_music</tt><big>(</big><em>filename: str) -&gt; Music | (nil</em>, <em>error</em><big>)</big><a class="headerlink" href="#drystal.load_music" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a music from a file.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Only the <a class="reference external" href="https://en.wikipedia.org/wiki/Ogg">Ogg</a> format is available.</p>
</div>
</dd></dl>

<dl class="function">
<dt>
<tt class="descclassname">drystal.</tt><tt class="descname">load_music</tt><big>(</big><em>callback: function[, samplesrate=44100: int]) -&gt; Music | (nil, error</em><big>)</big></dt>
<dd></dd></dl>

<dl class="function">
<dt id="drystal.set_music_volume">
<tt class="descclassname">drystal.</tt><tt class="descname">set_music_volume</tt><big>(</big><em>volume: float [0-1]</em><big>)</big><a class="headerlink" href="#drystal.set_music_volume" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="drystal.Sound">
<em class="property">class </em><tt class="descclassname">drystal.</tt><tt class="descname">Sound</tt><a class="headerlink" href="#drystal.Sound" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="drystal.Sound:play">
<tt class="descname">play</tt><big>(</big><em>[volume=1[, x=0[, y=0[, pitch=1]]]</em><big>)</big><a class="headerlink" href="#drystal.Sound:play" title="Permalink to this definition">¶</a></dt>
<dd><p>Plays the sound at given volume, position and pitch.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Param:</th><td class="field-body">volume float between 0 and 1</td>
</tr>
<tr class="field-even field"><th class="field-name">Param:</th><td class="field-body">x float between -1 and 1 (-1 is full left, 1 is full right)</td>
</tr>
<tr class="field-odd field"><th class="field-name">Param:</th><td class="field-body">y float between -1 and 1</td>
</tr>
<tr class="field-even field"><th class="field-name">Param:</th><td class="field-body">pitch float greater than or equal to 0</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="drystal.load_sound">
<tt class="descclassname">drystal.</tt><tt class="descname">load_sound</tt><big>(</big><em>filename: str) -&gt; Sound | (nil</em>, <em>error</em><big>)</big><a class="headerlink" href="#drystal.load_sound" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a sound from a file. It has to be in <a class="reference external" href="https://en.wikipedia.org/wiki/WAV">WAV</a> format. Only 44100Hz, 8 bits or 16 bits are supported.
If you want to use positional audio, it has to be mono audio.</p>
</dd></dl>

<dl class="function">
<dt>
<tt class="descclassname">drystal.</tt><tt class="descname">load_sound</tt><big>(</big><em>callback: function</em>, <em>numsamples: int) -&gt; Sound | (nil</em>, <em>error</em><big>)</big></dt>
<dd></dd></dl>

<dl class="function">
<dt>
<tt class="descclassname">drystal.</tt><tt class="descname">load_sound</tt><big>(</big><em>data: table) -&gt; Sound | (nil</em>, <em>error</em><big>)</big></dt>
<dd></dd></dl>

<dl class="function">
<dt id="drystal.set_sound_volume">
<tt class="descclassname">drystal.</tt><tt class="descname">set_sound_volume</tt><big>(</big><em>volume: float [0-1]</em><big>)</big><a class="headerlink" href="#drystal.set_sound_volume" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="storage">
<h2><a class="toc-backref" href="#id22">Storage</a><a class="headerlink" href="#storage" title="Permalink to this headline">¶</a></h2>
<p>In browser, this module uses Javascript&#8217;s localStorage feature. In desktop, it uses files.</p>
<p>Storage is a way to store data for futur executions.</p>
<dl class="function">
<dt id="drystal.store">
<tt class="descclassname">drystal.</tt><tt class="descname">store</tt><big>(</big><em>key: str</em>, <em>value: table</em><big>)</big><a class="headerlink" href="#drystal.store" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores a table in the storage.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.fetch">
<tt class="descclassname">drystal.</tt><tt class="descname">fetch</tt><big>(</big><em>key: str</em><big>)</big> &rarr; table | nil<a class="headerlink" href="#drystal.fetch" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the table associated with the given key.</p>
</dd></dl>

<div class="code highlight-lua"><div class="highlight"><pre><span class="n">drystal</span><span class="p">.</span><span class="n">store</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">test&#39;</span><span class="p">,</span> <span class="p">{</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;</span><span class="s">wow&#39;</span><span class="p">})</span>
<span class="nb">assert</span><span class="p">(</span><span class="n">drystal</span><span class="p">.</span><span class="n">fetch</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">test&#39;</span><span class="p">).</span><span class="n">text</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="s">wow&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Serialization of the table is done by a JSON module.
In the browser, data are stored in the <tt class="docutils literal"><span class="pre">localStorage</span></tt> from Javascript.</p>
</div>
</div>
<div class="section" id="web">
<h2><a class="toc-backref" href="#id23">Web</a><a class="headerlink" href="#web" title="Permalink to this headline">¶</a></h2>
<dl class="data">
<dt>
<tt class="descname">is_web: boolean</tt></dt>
<dd><p>Equals <tt class="docutils literal"><span class="pre">true</span></tt> if the game is executed inside a browser.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.wget">
<tt class="descclassname">drystal.</tt><tt class="descname">wget</tt><big>(</big><em>url: string</em>, <em>filename: string</em>, <em>onload: function</em>, <em>onerror: function</em><big>)</big><a class="headerlink" href="#drystal.wget" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><tt class="docutils literal"><span class="pre">wget</span></tt> is not available on the desktop and will throw an error if it is used on the desktop.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="drystal.run_js">
<tt class="descclassname">drystal.</tt><tt class="descname">run_js</tt><big>(</big><em>script: str</em><big>)</big><a class="headerlink" href="#drystal.run_js" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><tt class="docutils literal"><span class="pre">run_js</span></tt> is not available on the desktop and will throw an error if it is used on the desktop.</p>
</div>
</dd></dl>

</div>
<div class="section" id="utils">
<h2><a class="toc-backref" href="#id24">Utils</a><a class="headerlink" href="#utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="drystal.tojson">
<tt class="descclassname">drystal.</tt><tt class="descname">tojson</tt><big>(</big><em>table</em><big>)</big> &rarr; string<a class="headerlink" href="#drystal.tojson" title="Permalink to this definition">¶</a></dt>
<dd><p>Serializes a Lua table into <a class="reference external" href="http://json.org/">JSON</a> formatted string.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.fromjson">
<tt class="descclassname">drystal.</tt><tt class="descname">fromjson</tt><big>(</big><em>json: string</em><big>)</big> &rarr; table<a class="headerlink" href="#drystal.fromjson" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a <a class="reference external" href="http://json.org/">JSON</a> formatted string back into a Lua table.</p>
</dd></dl>

<dl class="function">
<dt id="drystal.file_exists">
<tt class="descclassname">drystal.</tt><tt class="descname">file_exists</tt><big>(</big><em>filename: str</em><big>)</big> &rarr; boolean<a class="headerlink" href="#drystal.file_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <tt class="docutils literal"><span class="pre">true</span></tt> if the file exists.</p>
</dd></dl>

</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="resources.html" class="btn btn-neutral float-right" title="Resources"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Welcome to Drystal’s website!"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Jérémy Anger.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'v1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>